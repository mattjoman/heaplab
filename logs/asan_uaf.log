=================================================================
==3287==ERROR: AddressSanitizer: heap-use-after-free on address 0x7b382ede0010 at pc 0x556cb57d0a4a bp 0x7ffd2447af00 sp 0x7ffd2447aef0
READ of size 4 at 0x7b382ede0010 thread T0
    #0 0x556cb57d0a49 in uaf src/scenarios/uaf.c:24
    #1 0x556cb57d031c in main src/main.c:16
    #2 0x7f1830027634  (/usr/lib/libc.so.6+0x27634) (BuildId: 2f722da304c0a508c891285e6840199c35019c8d)
    #3 0x7f18300276e8 in __libc_start_main (/usr/lib/libc.so.6+0x276e8) (BuildId: 2f722da304c0a508c891285e6840199c35019c8d)
    #4 0x556cb57d0124 in _start (/home/matt/portfolio/heaplab/bin/asan.out+0x2124) (BuildId: 43a6519703ff0d3557923b6401362ce882736d9e)

0x7b382ede0010 is located 0 bytes inside of 4-byte region [0x7b382ede0010,0x7b382ede0014)
freed by thread T0 here:
    #0 0x7f183051f79d in free /usr/src/debug/gcc/gcc/libsanitizer/asan/asan_malloc_linux.cpp:51
    #1 0x556cb57d09f1 in uaf src/scenarios/uaf.c:21
    #2 0x556cb57d031c in main src/main.c:16
    #3 0x7f1830027634  (/usr/lib/libc.so.6+0x27634) (BuildId: 2f722da304c0a508c891285e6840199c35019c8d)
    #4 0x7f18300276e8 in __libc_start_main (/usr/lib/libc.so.6+0x276e8) (BuildId: 2f722da304c0a508c891285e6840199c35019c8d)
    #5 0x556cb57d0124 in _start (/home/matt/portfolio/heaplab/bin/asan.out+0x2124) (BuildId: 43a6519703ff0d3557923b6401362ce882736d9e)

previously allocated by thread T0 here:
    #0 0x7f1830520cb5 in malloc /usr/src/debug/gcc/gcc/libsanitizer/asan/asan_malloc_linux.cpp:67
    #1 0x556cb57d08f7 in uaf src/scenarios/uaf.c:15
    #2 0x556cb57d031c in main src/main.c:16
    #3 0x7f1830027634  (/usr/lib/libc.so.6+0x27634) (BuildId: 2f722da304c0a508c891285e6840199c35019c8d)
    #4 0x7f18300276e8 in __libc_start_main (/usr/lib/libc.so.6+0x276e8) (BuildId: 2f722da304c0a508c891285e6840199c35019c8d)
    #5 0x556cb57d0124 in _start (/home/matt/portfolio/heaplab/bin/asan.out+0x2124) (BuildId: 43a6519703ff0d3557923b6401362ce882736d9e)

SUMMARY: AddressSanitizer: heap-use-after-free src/scenarios/uaf.c:24 in uaf
Shadow bytes around the buggy address:
  0x7b382eddfd80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x7b382eddfe00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x7b382eddfe80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x7b382eddff00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x7b382eddff80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
=>0x7b382ede0000: fa fa[fd]fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x7b382ede0080: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x7b382ede0100: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x7b382ede0180: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x7b382ede0200: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x7b382ede0280: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==3287==ABORTING
